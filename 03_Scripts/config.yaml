prepare_data.py:
  debug_mode: True
  tasks:
    determine_roads_surfaces: False
    determine_restricted_AOI: False
    make_raster_mosaic: False
    generate_tiles_info: True
  input:
    input_folder: /mnt/data-01/gsalamin/proj-roadsurf-b/02_Data
    input_files:
      roads: /initial/TLM/Strassen/Roads_inside_AOI.shp
      roads_param: /initial/TLM/Strassen/Objektarten_to_keep.xlsx
      forests: /initial/TLM/Clip_Wald_Bodenbedeckung/forests.shp
      aoi: /initial/AOI/temp_AOI_Prototyp_Belagsarten_2tiles.shp
  output:
    output_folder: /mnt/data-01/gsalamin/proj-roadsurf-b/02_Data/processed
    output_files:
      roads: /shapefiles_gpkg/non_forest_wide_roads.shp
      restricted_AOI: /shapefiles_gpkg/restricted_AOI.shp
      tiles_aoi:  /json/tiles_aoi.geojson
      gpkg_tiles: /shapefiles_gpkg/epsg3857_tiles.gpkg
  param_tiles:
    zoom_level: 17  # keep between 17 and 20  


RS_images_to_S3.py:
  access_key:
  secret_key:
  url: https://s3.pub1.infomaniak.cloud
  datapath: D:\Export_RS\*
  bucket: proj-roadsurf
  outpath: 02_Data/initial/images_RS/


generate_tilesets.py:
  debug_mode: True
  datasets:
    aoi_tiles_geojson: /mnt/data-01/gsalamin/proj-roadsurf-b/02_Data/processed/json/tiles_aoi.geojson
    orthophotos_web_service:
      type: XYZ      # supported values: 1. MIL = Map Image Layer 2. WMS 3. XYZ
      url: https://titiler.vm-gpu-01.stdl.ch/mosaicjson/tiles/{z}/{x}/{y}.tif
      srs: "EPSG:3857"
      parameters:
        url: /data/mosaic_3857.json
        no_data: 0
        return_mask: false
        pixel_selection: lowest
  output_folder: /mnt/data-01/gsalamin/proj-roadsurf-b/02_Data/processed/obj_detector
  tile_size: 256 # per side, in pixels
  overwrite: False
  n_jobs: 10
  COCO_metadata:
    year: 2018
    version: 1.0
    description: TLM3D, Roads layer
    contributor: swisstopo
    url: https://swisstopo.ch
    license:
      name: unknown
      url: https://www.swisstopo.admin.ch/fr/home/meta/conditions-generales/geodonnees/ogd.html
    category:
      name: 'road'
      supercategory: 'facility'


statistical_analysis.py:
  input:
    input_folder: /mnt/data-01/gsalamin/proj-roadsurf-b/02_Data/initial
  processed:
    processed_folder: /mnt/data-01/gsalamin/proj-roadsurf-b/02_Data/processed
    input_files:
      images: /obj_detector/all-images-256
      roads: /shapefiles_gpkg/non_forest_wide_roads.shp
      tiles: /json/tiles_aoi.geojson
    output_files:
      stats: /tables/statistics_roads.csv
  final:
    final_folder: /mnt/data-01/gsalamin/proj-roadsurf-b/02_Data/final
    stats_by_type: /tables/statistics_roads_by_type.csv
